<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>AR Chemical Mixing - Professional Lab Simulation</title>

<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar.js"></script>

<style>
body{margin:0;overflow:hidden;font-family:'Segoe UI',Arial;}
#hud{
position:absolute;
top:10px;
left:10px;
background:rgba(0,0,0,0.85);
color:white;
padding:15px;
border-radius:10px;
z-index:1000;
border-left:5px solid #00ccff;
}
button{
background:#4CAF50;
color:white;
border:none;
padding:8px 16px;
border-radius:5px;
cursor:pointer;
margin-top:5px;
width:100%;
font-weight:bold;
transition:0.3s;
}
button:hover{
background:#45a049;
transform:scale(1.02);
}
.position-info{
position:absolute;
top:10px;
right:10px;
background:rgba(0,0,0,0.85);
color:white;
padding:15px;
border-radius:10px;
font-size:14px;
z-index:1000;
min-width:220px;
border-right:5px solid #ffaa00;
}
.instruction{
position:absolute;
bottom:20px;
left:50%;
transform:translateX(-50%);
background:linear-gradient(135deg, #0066cc, #0099ff);
color:white;
padding:15px 30px;
border-radius:50px;
text-align:center;
font-size:18px;
font-weight:bold;
z-index:1000;
box-shadow:0 4px 15px rgba(0,0,0,0.3);
border:2px solid white;
}
.progress-bar{
position:absolute;
bottom:100px;
left:50%;
transform:translateX(-50%);
width:300px;
height:20px;
background:rgba(0,0,0,0.5);
border-radius:10px;
z-index:1000;
overflow:hidden;
border:2px solid white;
}
.progress-fill{
height:100%;
width:0%;
background:linear-gradient(90deg, #00ff00, #00cc00);
border-radius:10px;
transition:width 0.3s;
}
</style>

<script>
let tubeAVisible=false;
let tubeBVisible=false;
let isDragging=false;
let reactionStarted=false;
let tubeAElement=null;
let tubeBElement=null;

let dragStartY=0;
let dragStartX=0;
let tubeStartPos={x:0,y:0,z:0};

const BLUE_COLOR='#0066cc';
const YELLOW_COLOR='#ffaa00';
const GREEN_COLOR='#00cc66';
const DARK_GREEN='#008844';

let liquidLevelA=0.45;
let liquidLevelB=0.45;
let tiltAngle=0;
let pouredAmount=0;
let isTilted=false;
let pourIntensity=0;
let lastPourTime=0;

// 3D Sound effect (visual only since we can't use audio in this environment)
let soundWaves=[];

document.addEventListener('DOMContentLoaded',function(){
const scene=document.querySelector('a-scene');

scene.addEventListener('markerFound',function(e){
if(e.target.id==='markerA'){
tubeAVisible=true;
tubeAElement=document.querySelector('#tubeA');
document.getElementById('status').textContent="‚úÖ Blue tube ready";
document.getElementById('status').style.color="#00ff00";
updateLiquidLevels();
}
if(e.target.id==='markerB'){
tubeBVisible=true;
tubeBElement=document.querySelector('#tubeB');
document.getElementById('status').textContent="‚úÖ Yellow tube ready";
document.getElementById('status').style.color="#00ff00";
}
if(tubeAVisible && tubeBVisible){
document.getElementById('status').textContent="‚úÖ READY! Click BLUE tube and drag DOWN to pour";
document.getElementById('status').style.color="#00ff00";
updatePositionInfo();
updateInstruction("üëá CLICK on BLUE tube and DRAG DOWNWARD to pour like a real chemist üëá");
}
});

scene.addEventListener('markerLost',function(e){
if(e.target.id==='markerA') tubeAVisible=false;
if(e.target.id==='markerB') tubeBVisible=false;
updateStatus();
});

// MOUSE EVENTS - PROFESSIONAL LAB SIMULATION
scene.addEventListener('mousedown',function(e){
if(reactionStarted || !tubeAVisible || !tubeBVisible || !tubeAElement) return;
e.preventDefault();
dragStartY=e.clientY;
dragStartX=e.clientX;
const pos=tubeAElement.object3D.position;
tubeStartPos={x:pos.x, y:pos.y, z:pos.z};
isDragging=true;
isTilted=false;
document.getElementById('status').textContent="üü° GRIPPED - Drag DOWN to pour";
document.getElementById('status').style.color="#ffaa00";
createGripEffect();
console.log("GRIP STARTED");
});

scene.addEventListener('mousemove',function(e){
if(!isDragging || !tubeAElement || reactionStarted) return;
e.preventDefault();

// Calculate drag distance
const deltaY = e.clientY - dragStartY;
const deltaX = e.clientX - dragStartX;

// Move tube with mouse - smooth movement
const pos = tubeAElement.object3D.position;
pos.x = tubeStartPos.x + deltaX * 0.003;
pos.z = tubeStartPos.z + deltaY * 0.003;

// PROFESSIONAL POURING MECHANICS
if(deltaY > 20) { // Dragging DOWN = pour
    // Tilt angle increases with drag distance (more realistic)
    tiltAngle = Math.min(90, 20 + (deltaY - 20) * 0.8);
    tubeAElement.setAttribute('rotation', `-${tiltAngle} 0 0`);
    isTilted = true;
    
    // Pour intensity based on angle
    pourIntensity = Math.min(1, tiltAngle / 60);
    
    document.getElementById('status').textContent=`üíß POURING at ${Math.round(tiltAngle)}¬∞ tilt - Flow: ${Math.round(pourIntensity*100)}%`;
    document.getElementById('status').style.color="#00ffff";
    updateInstruction(`‚¨áÔ∏è DRAGGING DOWN - Tilt: ${Math.round(tiltAngle)}¬∞ | Flow rate: ${Math.round(pourIntensity*100)}% ‚¨áÔ∏è`);
    
    // Start pouring with intensity
    if(pouredAmount < 0.35) {
        startPouring(pourIntensity);
    }
    
    // Create pour sound wave effect
    if(Date.now() - lastPourTime > 100) {
        createSoundWave();
        lastPourTime = Date.now();
    }
} 
else if(deltaY < -20) { // Dragging UP = tilt back
    tiltAngle = Math.min(45, Math.abs(deltaY + 20) * 0.5);
    tubeAElement.setAttribute('rotation', `${tiltAngle} 0 0`);
    isTilted = true;
    pourIntensity = 0;
    document.getElementById('status').textContent=`‚¨ÜÔ∏è TILTING BACK: ${Math.round(tiltAngle)}¬∞`;
    document.getElementById('status').style.color="#ffaa00";
    updateInstruction(`‚¨ÜÔ∏è DRAGGING UP - Tilt back: ${Math.round(tiltAngle)}¬∞ ‚¨ÜÔ∏è`);
    stopPouring();
}
else {
    // Small movements = slight wobble
    if(isTilted) {
        tubeAElement.setAttribute('rotation', `0 0 0`);
        isTilted = false;
    }
    pourIntensity = 0;
    stopPouring();
    document.getElementById('status').textContent="üü° Drag DOWN to pour";
    document.getElementById('status').style.color="#ffaa00";
}

updatePositionInfo();
updateProgressBar();
});

scene.addEventListener('mouseup',function(e){
if(!isDragging) return;
isDragging=false;
stopPouring();
tubeAElement.setAttribute('rotation', `0 0 0`);
isTilted = false;
pourIntensity = 0;
document.getElementById('status').textContent="‚úÖ Ready - Click BLUE tube and drag DOWN to pour";
document.getElementById('status').style.color="#00ff00";
updateInstruction("üëá CLICK on BLUE tube and DRAG DOWNWARD to pour like a real chemist üëá");
console.log("GRIP RELEASED");
});

// TOUCH EVENTS - PROFESSIONAL LAB SIMULATION
scene.addEventListener('touchstart',function(e){
if(reactionStarted || !tubeAVisible || !tubeBVisible || !tubeAElement) return;
e.preventDefault();
const touch=e.touches[0];
dragStartY=touch.clientY;
dragStartX=touch.clientX;
const pos=tubeAElement.object3D.position;
tubeStartPos={x:pos.x, y:pos.y, z:pos.z};
isDragging=true;
isTilted=false;
document.getElementById('status').textContent="üü° GRIPPED - Drag DOWN to pour";
document.getElementById('status').style.color="#ffaa00";
createGripEffect();
console.log("GRIP STARTED");
});

scene.addEventListener('touchmove',function(e){
if(!isDragging || !tubeAElement || reactionStarted) return;
e.preventDefault();
const touch=e.touches[0];

// Calculate drag distance
const deltaY = touch.clientY - dragStartY;
const deltaX = touch.clientX - dragStartX;

// Move tube with touch - smooth movement
const pos = tubeAElement.object3D.position;
pos.x = tubeStartPos.x + deltaX * 0.003;
pos.z = tubeStartPos.z + deltaY * 0.003;

// PROFESSIONAL POURING MECHANICS
if(deltaY > 20) { // Dragging DOWN = pour
    // Tilt angle increases with drag distance (more realistic)
    tiltAngle = Math.min(90, 20 + (deltaY - 20) * 0.8);
    tubeAElement.setAttribute('rotation', `-${tiltAngle} 0 0`);
    isTilted = true;
    
    // Pour intensity based on angle
    pourIntensity = Math.min(1, tiltAngle / 60);
    
    document.getElementById('status').textContent=`üíß POURING at ${Math.round(tiltAngle)}¬∞ tilt - Flow: ${Math.round(pourIntensity*100)}%`;
    document.getElementById('status').style.color="#00ffff";
    updateInstruction(`‚¨áÔ∏è DRAGGING DOWN - Tilt: ${Math.round(tiltAngle)}¬∞ | Flow rate: ${Math.round(pourIntensity*100)}% ‚¨áÔ∏è`);
    
    // Start pouring with intensity
    if(pouredAmount < 0.35) {
        startPouring(pourIntensity);
    }
    
    // Create pour sound wave effect
    if(Date.now() - lastPourTime > 100) {
        createSoundWave();
        lastPourTime = Date.now();
    }
} 
else if(deltaY < -20) { // Dragging UP = tilt back
    tiltAngle = Math.min(45, Math.abs(deltaY + 20) * 0.5);
    tubeAElement.setAttribute('rotation', `${tiltAngle} 0 0`);
    isTilted = true;
    pourIntensity = 0;
    document.getElementById('status').textContent=`‚¨ÜÔ∏è TILTING BACK: ${Math.round(tiltAngle)}¬∞`;
    document.getElementById('status').style.color="#ffaa00";
    updateInstruction(`‚¨ÜÔ∏è DRAGGING UP - Tilt back: ${Math.round(tiltAngle)}¬∞ ‚¨ÜÔ∏è`);
    stopPouring();
}
else {
    // Small movements = slight wobble
    if(isTilted) {
        tubeAElement.setAttribute('rotation', `0 0 0`);
        isTilted = false;
    }
    pourIntensity = 0;
    stopPouring();
    document.getElementById('status').textContent="üü° Drag DOWN to pour";
    document.getElementById('status').style.color="#ffaa00";
}

updatePositionInfo();
updateProgressBar();
});

scene.addEventListener('touchend',function(e){
if(!isDragging) return;
isDragging=false;
stopPouring();
tubeAElement.setAttribute('rotation', `0 0 0`);
isTilted = false;
pourIntensity = 0;
document.getElementById('status').textContent="‚úÖ Ready - Click BLUE tube and drag DOWN to pour";
document.getElementById('status').style.color="#00ff00";
updateInstruction("üëá CLICK on BLUE tube and DRAG DOWNWARD to pour like a real chemist üëá");
console.log("GRIP RELEASED");
});

scene.addEventListener('click',function(e){ e.preventDefault(); return false; });
});

function startPouring(intensity) {
    if(pouredAmount >= 0.35 || reactionStarted || !isTilted) return;
    
    // Transfer liquid based on intensity (faster with more tilt)
    const pourRate = 0.012 * intensity;
    liquidLevelA = Math.max(0.08, liquidLevelA - pourRate);
    liquidLevelB = Math.min(0.62, liquidLevelB + pourRate);
    pouredAmount += pourRate;
    
    updateLiquidLevels();
    
    // Create multiple droplets based on intensity
    const dropletCount = Math.floor(3 + intensity * 5);
    for(let i=0; i<dropletCount; i++) {
        setTimeout(() => createDroplet(intensity), i * 40);
    }
    
    // Create splash effect at target
    if(Math.random() > 0.7) {
        createSplashEffect();
    }
    
    // Mix colors gradually
    const mixPercent = pouredAmount / 0.35;
    mixLiquids(Math.min(1, mixPercent));
    
    if(pouredAmount >= 0.35) {
        completeReaction();
    }
}

function stopPouring() {}

function createDroplet(intensity) {
    if(!tubeAElement || !tubeBElement || !isTilted) return;
    
    for(let i=0; i<2; i++) {
        const drop = document.createElement('a-sphere');
        // Variable droplet size based on intensity
        const size = 0.012 + intensity * 0.01;
        drop.setAttribute('radius', size);
        drop.setAttribute('color', '#3399ff');
        drop.setAttribute('opacity', '0.9');
        drop.setAttribute('metalness', '0.4');
        drop.setAttribute('roughness', '0.1');
        
        // Calculate pour position with physics
        const tiltRad = tiltAngle * Math.PI / 180;
        const randomOffset = (Math.random() - 0.5) * 0.06;
        
        const startX = tubeAElement.object3D.position.x + Math.sin(tiltRad) * 0.2 + randomOffset;
        const startY = tubeAElement.object3D.position.y + 0.25 - Math.sin(tiltRad) * 0.3;
        const startZ = tubeAElement.object3D.position.z + Math.cos(tiltRad) * 0.3 + (Math.random() - 0.5) * 0.05;
        
        drop.setAttribute('position', {x: startX, y: startY, z: startZ});
        
        // Target with slight variation for realism
        const targetX = tubeBElement.object3D.position.x + (Math.random() - 0.5) * 0.1;
        const targetY = tubeBElement.object3D.position.y + 0.4 + Math.random() * 0.1;
        const targetZ = tubeBElement.object3D.position.z + (Math.random() - 0.5) * 0.1;
        
        // Parabolic arc with variable speed based on intensity
        const duration = 400 + Math.random() * 200;
        
        drop.setAttribute('animation', {
            property: 'position',
            to: `${targetX} ${targetY} ${targetZ}`,
            dur: duration,
            easing: 'easeInQuad'
        });
        
        drop.setAttribute('animation__opacity', {
            property: 'opacity',
            to: '0',
            dur: duration
        });
        
        drop.setAttribute('animation__scale', {
            property: 'scale',
            from: '1 1 1',
            to: '0.3 0.3 0.3',
            dur: duration
        });
        
        document.querySelector('a-scene').appendChild(drop);
        setTimeout(() => drop.remove(), duration);
    }
}

function createSplashEffect() {
    if(!tubeBElement) return;
    
    const splash = document.createElement('a-ring');
    splash.setAttribute('radius-inner', 0.02);
    splash.setAttribute('radius-outer', 0.05);
    splash.setAttribute('color', YELLOW_COLOR);
    splash.setAttribute('opacity', 0.6);
    splash.setAttribute('rotation', '-90 0 0');
    
    const pos = tubeBElement.object3D.position;
    splash.setAttribute('position', {
        x: pos.x + (Math.random() - 0.5) * 0.1,
        y: pos.y + liquidLevelB * 0.45 + 0.2,
        z: pos.z + (Math.random() - 0.5) * 0.1
    });
    
    splash.setAttribute('animation', {
        property: 'scale',
        from: '0.5 0.5 0.5',
        to: '3 3 3',
        dur: 400,
        easing: 'easeOutQuad'
    });
    
    splash.setAttribute('animation__opacity', {
        property: 'opacity',
        to: '0',
        dur: 400
    });
    
    document.querySelector('a-scene').appendChild(splash);
    setTimeout(() => splash.remove(), 400);
}

function createSoundWave() {
    if(!tubeAElement) return;
    
    const wave = document.createElement('a-torus');
    wave.setAttribute('radius', 0.1);
    wave.setAttribute('radius-tubular', 0.002);
    wave.setAttribute('color', '#88ccff');
    wave.setAttribute('opacity', 0.4);
    
    const pos = tubeAElement.object3D.position;
    wave.setAttribute('position', {
        x: pos.x,
        y: pos.y + 0.3,
        z: pos.z
    });
    
    wave.setAttribute('animation', {
        property: 'scale',
        from: '0.5 0.5 0.5',
        to: '3 3 3',
        dur: 300,
        easing: 'easeOutQuad'
    });
    
    wave.setAttribute('animation__opacity', {
        property: 'opacity',
        to: '0',
        dur: 300
    });
    
    document.querySelector('a-scene').appendChild(wave);
    setTimeout(() => wave.remove(), 300);
}

function createGripEffect() {
    if(!tubeAElement) return;
    
    const glow = document.createElement('a-ring');
    glow.setAttribute('radius-inner', 0.2);
    glow.setAttribute('radius-outer', 0.25);
    glow.setAttribute('color', '#ffff00');
    glow.setAttribute('opacity', 0.3);
    glow.setAttribute('rotation', '-90 0 0');
    
    const pos = tubeAElement.object3D.position;
    glow.setAttribute('position', {
        x: pos.x,
        y: pos.y + 0.1,
        z: pos.z
    });
    
    glow.setAttribute('animation', {
        property: 'scale',
        from: '0.5 0.5 0.5',
        to: '1.5 1.5 1.5',
        dur: 500
    });
    
    glow.setAttribute('animation__opacity', {
        property: 'opacity',
        to: '0',
        dur: 500
    });
    
    document.querySelector('a-scene').appendChild(glow);
    setTimeout(() => glow.remove(), 500);
}

function updateLiquidLevels() {
    const liquidA = document.querySelector('#liquidA');
    const surfaceA = document.querySelector('#surfaceA');
    const liquidB = document.querySelector('#liquidB');
    const surfaceB = document.querySelector('#surfaceB');
    
    if(liquidA) {
        liquidA.setAttribute('height', liquidLevelA);
        liquidA.setAttribute('position', `0 ${0.15 + liquidLevelA/2} 0`);
    }
    if(surfaceA) surfaceA.setAttribute('position', `0 ${0.15 + liquidLevelA} 0`);
    if(liquidB) {
        liquidB.setAttribute('height', liquidLevelB);
        liquidB.setAttribute('position', `0 ${0.15 + liquidLevelB/2} 0`);
    }
    if(surfaceB) surfaceB.setAttribute('position', `0 ${0.15 + liquidLevelB} 0`);
}

function mixLiquids(amount) {
    if(amount <= 0) {
        document.querySelector('#liquidA')?.setAttribute('color', BLUE_COLOR);
        document.querySelector('#surfaceA')?.setAttribute('color', BLUE_COLOR);
        document.querySelector('#liquidB')?.setAttribute('color', YELLOW_COLOR);
        document.querySelector('#surfaceB')?.setAttribute('color', YELLOW_COLOR);
    } else if(amount >= 1) {
        document.querySelector('#liquidA')?.setAttribute('color', DARK_GREEN);
        document.querySelector('#surfaceA')?.setAttribute('color', DARK_GREEN);
        document.querySelector('#liquidB')?.setAttribute('color', DARK_GREEN);
        document.querySelector('#surfaceB')?.setAttribute('color', DARK_GREEN);
    } else {
        // Professional color mixing formula
        const r = Math.round(0 + 180 * amount);
        const g = Math.round(100 + 155 * amount);
        const b = Math.round(100 + 100 * amount);
        const mixedColor = `rgb(${r}, ${g}, ${b})`;
        document.querySelector('#liquidA')?.setAttribute('color', mixedColor);
        document.querySelector('#surfaceA')?.setAttribute('color', mixedColor);
        document.querySelector('#liquidB')?.setAttribute('color', mixedColor);
        document.querySelector('#surfaceB')?.setAttribute('color', mixedColor);
    }
}

function updateProgressBar() {
    const percent = Math.round((pouredAmount / 0.35) * 100);
    document.querySelector('.progress-fill').style.width = Math.min(100, percent) + '%';
}

function updatePositionInfo() {
    if(tubeAElement && tubeBElement) {
        const posA = tubeAElement.object3D.position;
        const posB = tubeBElement.object3D.position;
        const distance = Math.sqrt(Math.pow(posA.x-posB.x,2) + Math.pow(posA.z-posB.z,2));
        
        document.getElementById('position-info').innerHTML = 
            '<strong style="color:#88ccff;">üîµ BLUE TUBE</strong><br>' +
            'Position: ' + posA.x.toFixed(2) + ', ' + posA.z.toFixed(2) + '<br>' +
            '<span style="color:#ffaa00; font-size:22px;">‚¨áÔ∏è TILT: ' + Math.round(tiltAngle) + '¬∞</span><br>' +
            'Flow Rate: ' + Math.round(pourIntensity*100) + '%<br>' +
            'Liquid: ' + Math.round((liquidLevelA/0.45)*100) + '%<br>' +
            '<strong style="color:#ffcc00;">üü° YELLOW TUBE</strong><br>' +
            'Liquid: ' + Math.round((liquidLevelB/0.45)*100) + '%<br>' +
            '<strong>üìè Distance: ' + distance.toFixed(2) + '</strong><br>' +
            '<strong style="color:#00ff00;">üíß Poured: ' + Math.round((pouredAmount/0.35)*100) + '%</strong>';
    }
}

function updateInstruction(msg) {
    const el = document.querySelector('.instruction');
    if(el) el.innerHTML = msg;
}

function updateStatus() {
    if(tubeAVisible && tubeBVisible) {
        document.getElementById('status').textContent = "‚úÖ READY! Click BLUE tube and drag DOWN to pour";
        document.getElementById('status').style.color = "#00ff00";
    } else {
        document.getElementById('status').textContent = "‚è≥ Scan both markers to begin";
    }
}

function completeReaction() {
    reactionStarted = true;
    stopPouring();
    mixLiquids(1.0);
    document.getElementById('status').textContent = "üß™ REACTION COMPLETE! Beautiful green solution!";
    document.getElementById('status').style.color = "#00ff00";
    updateInstruction("‚úÖ EXPERIMENT SUCCESSFUL! Final color: Emerald Green ‚úÖ");
    document.querySelector('.progress-fill').style.width = '100%';
    
    // Celebration effects
    for(let i = 0; i < 30; i++) {
        setTimeout(() => {
            if(tubeBElement) {
                const pos = tubeBElement.object3D.position;
                for(let j=0; j<3; j++) {
                    const bubble = document.createElement('a-sphere');
                    bubble.setAttribute('radius', 0.015 + Math.random()*0.02);
                    bubble.setAttribute('color', GREEN_COLOR);
                    bubble.setAttribute('emissive', GREEN_COLOR);
                    bubble.setAttribute('emissive-intensity', '0.5');
                    bubble.setAttribute('position', {
                        x: pos.x + (Math.random()-0.5)*0.3,
                        y: pos.y + 0.2 + Math.random()*0.2,
                        z: pos.z + (Math.random()-0.5)*0.3
                    });
                    bubble.setAttribute('animation', {
                        property: 'position',
                        to: `${pos.x + (Math.random()-0.5)*0.4} ${pos.y + 1.0} ${pos.z + (Math.random()-0.5)*0.4}`,
                        dur: 1500,
                        easing: 'easeOutQuad'
                    });
                    bubble.setAttribute('animation__opacity', {
                        property: 'opacity',
                        to: '0',
                        dur: 1500
                    });
                    document.querySelector('a-scene').appendChild(bubble);
                    setTimeout(() => bubble.remove(), 1500);
                }
            }
        }, i * 100);
    }
}

function resetExperiment() {
    reactionStarted = false;
    isDragging = false;
    tiltAngle = 0;
    pouredAmount = 0;
    liquidLevelA = 0.45;
    liquidLevelB = 0.45;
    isTilted = false;
    pourIntensity = 0;
    
    if(tubeAElement) {
        tubeAElement.object3D.position.set(0, 0, 0);
        tubeAElement.setAttribute('rotation', '0 0 0');
    }
    
    updateLiquidLevels();
    mixLiquids(0);
    document.getElementById('status').textContent = "Scan both markers";
    document.getElementById('status').style.color = "white";
    updateStatus();
    updatePositionInfo();
    updateInstruction("üì∑ Point camera at both test tube markers");
    document.querySelector('.progress-fill').style.width = '0%';
}
</script>
</head>

<body>

<div id="hud">
<h3 style="margin:0 0 10px 0;">üß™ Professional Lab Simulator</h3>
<p id="status" style="font-weight:bold; margin:5px 0;">Scan both markers</p>
<button onclick="resetExperiment()">üîÑ Reset Experiment</button>
</div>

<div class="position-info" id="position-info">
<strong style="color:#88ccff;">üîµ BLUE TUBE</strong><br>
Position: --<br>
<span style="color:#ffaa00; font-size:22px;">‚¨áÔ∏è TILT: 0¬∞</span><br>
Flow Rate: 0%<br>
Liquid: --%<br>
<strong style="color:#ffcc00;">üü° YELLOW TUBE</strong><br>
Liquid: --%<br>
<strong>üìè Distance: --</strong><br>
<strong style="color:#00ff00;">üíß Poured: 0%</strong>
</div>

<div class="progress-bar">
<div class="progress-fill"></div>
</div>

<div class="instruction">
üì∑ Point camera at both test tube markers
</div>

<a-scene embedded arjs="debugUIEnabled:false;">

<a-light type="ambient" intensity="0.9"></a-light>
<a-light type="directional" position="2 3 2" intensity="0.7"></a-light>

<a-marker id="markerA" type="pattern" url="markers/testtube_markerA.patt">
<a-entity id="tubeA">
<!-- Glass tube with better material -->
<a-cylinder radius="0.15" height="0.6" position="0 0.3 0" color="#ffffff" opacity="0.6" roughness="0.2" metalness="0.3" transparent="true"></a-cylinder>
<!-- Blue liquid with shine -->
<a-cylinder id="liquidA" radius="0.13" height="0.45" position="0 0.225 0" color="#0066cc" opacity="0.96" roughness="0.1" metalness="0.2"></a-cylinder>
<!-- Liquid surface with ripple effect -->
<a-circle id="surfaceA" radius="0.13" position="0 0.45 0" color="#0066cc" opacity="0.96" rotation="-90 0 0" roughness="0.1" metalness="0.3"></a-circle>
</a-entity>
</a-marker>

<a-marker id="markerB" type="pattern" url="markers/testtube_markerB.patt">
<a-entity id="tubeB">
<!-- Glass tube with better material -->
<a-cylinder radius="0.15" height="0.6" position="0 0.3 0" color="#ffffff" opacity="0.6" roughness="0.2" metalness="0.3" transparent="true"></a-cylinder>
<!-- Yellow liquid with shine -->
<a-cylinder id="liquidB" radius="0.13" height="0.45" position="0 0.225 0" color="#ffaa00" opacity="0.96" roughness="0.1" metalness="0.2"></a-cylinder>
<!-- Liquid surface with ripple effect -->
<a-circle id="surfaceB" radius="0.13" position="0 0.45 0" color="#ffaa00" opacity="0.96" rotation="-90 0 0" roughness="0.1" metalness="0.3"></a-circle>
</a-entity>
</a-marker>

<a-entity camera></a-entity>

</a-scene>

</body>
</html>
