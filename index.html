<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>AR Chemical Mixing</title>

<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar.js"></script>

<style>
body{margin:0;overflow:hidden;font-family:Arial;}
#hud{
position:absolute;
top:10px;
left:10px;
background:rgba(0,0,0,0.8);
color:white;
padding:10px;
border-radius:10px;
z-index:1000;
}
button{
background:#4CAF50;
color:white;
border:none;
padding:8px 16px;
border-radius:5px;
cursor:pointer;
}
</style>

<script>
let tubeAVisible=false;
let tubeBVisible=false;
let reactionStarted=false;
let tubeAElement=null;
let tubeBElement=null;

const BLUE_COLOR='#0088ff';
const YELLOW_COLOR='#ffff00';
const GREEN_COLOR='#00ff00';

document.addEventListener('DOMContentLoaded',function(){
const scene=document.querySelector('a-scene');

scene.addEventListener('markerFound',function(e){
if(e.target.id==='markerA'){
tubeAVisible=true;
tubeAElement=document.querySelector('#tubeA');
}
if(e.target.id==='markerB'){
tubeBVisible=true;
tubeBElement=document.querySelector('#tubeB');
}
});

scene.addEventListener('touchend',function(){
if(!reactionStarted && tubeAVisible && tubeBVisible){
startReaction();
}
});
});

function startReaction(){
reactionStarted=true;

document.querySelector('#liquidA').setAttribute('color',GREEN_COLOR);
document.querySelector('#surfaceA').setAttribute('color',GREEN_COLOR);

document.querySelector('#liquidB').setAttribute('color',GREEN_COLOR);
document.querySelector('#surfaceB').setAttribute('color',GREEN_COLOR);

document.getElementById('status').textContent="Reaction Complete!";
}

function resetExperiment(){
reactionStarted=false;

document.querySelector('#liquidA').setAttribute('color',BLUE_COLOR);
document.querySelector('#surfaceA').setAttribute('color',BLUE_COLOR);

document.querySelector('#liquidB').setAttribute('color',YELLOW_COLOR);
document.querySelector('#surfaceB').setAttribute('color',YELLOW_COLOR);

document.getElementById('status').textContent="Scan both markers";
}
</script>
</head>

<body>

<div id="hud">
<h3>ðŸ§ª Chemical Mixing</h3>
<p id="status">Scan both markers</p>
<button onclick="resetExperiment()">Reset</button>
</div>

<a-scene embedded arjs="debugUIEnabled:false;">

<a-light type="ambient" intensity="1"></a-light>

<a-marker id="markerA" type="pattern" url="markers/testtube_markerA.patt">
<a-entity id="tubeA">
<a-cylinder radius="0.15" height="0.6" position="0 0.3 0" color="#f8f8f8"></a-cylinder>
<a-cylinder id="liquidA" radius="0.13" height="0.45" position="0 0.225 0" color="#0088ff"></a-cylinder>
<a-circle id="surfaceA" radius="0.13" position="0 0.45 0" color="#0088ff" rotation="-90 0 0"></a-circle>
</a-entity>
</a-marker>

<a-marker id="markerB" type="pattern" url="markers/testtube_markerB.patt">
<a-entity id="tubeB">
<a-cylinder radius="0.15" height="0.6" position="0 0.3 0" color="#f8f8f8"></a-cylinder>
<a-cylinder id="liquidB" radius="0.13" height="0.45" position="0 0.225 0" color="#ffff00"></a-cylinder>
<a-circle id="surfaceB" radius="0.13" position="0 0.45 0" color="#ffff00" rotation="-90 0 0"></a-circle>
</a-entity>
</a-marker>

<a-entity camera></a-entity>

</a-scene>

</body>
</html>
