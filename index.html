<!DOCTYPE html>
<html>
<head>
  <title>Tilt Test - Simple</title>
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      text-align: center;
    }
    .container {
      margin-top: 50px;
    }
    .tilt-box {
      width: 200px;
      height: 200px;
      margin: 30px auto;
      background: linear-gradient(to bottom, #4CAF50, #2196F3);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      font-weight: bold;
      transition: transform 0.3s;
    }
    .instructions {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h1>ğŸ“± Phone Tilt Test</h1>
  
  <div class="instructions">
    <h3>Hold phone normally and tilt FORWARD/BACKWARD</h3>
    <p>Like nodding "YES" with your phone</p>
  </div>
  
  <div class="container">
    <div class="tilt-box" id="tiltBox">
      0Â°
    </div>
    
    <div id="tiltInfo">
      <p><strong>Forward Tilt:</strong> <span id="tiltValue">0Â°</span></p>
      <p><strong>Status:</strong> <span id="status">Hold upright</span></p>
    </div>
  </div>

  <div class="instructions">
    <h3>Expected Behavior:</h3>
    <p>ğŸ¯ Tilt < 35Â°: Nothing</p>
    <p>ğŸ’§ Tilt > 35Â°: Blue droplets fall</p>
    <p>ğŸ¨ Tilt > 40Â°: Chemical reaction</p>
  </div>

  <script>
    let tiltValue = 0;
    
    if (window.DeviceOrientationEvent) {
      window.addEventListener('deviceorientation', (event) => {
        // beta = front-to-back tilt (-180 to 180)
        // gamma = left-to-right tilt (-90 to 90)
        // alpha = compass direction (0 to 360)
        
        const beta = Math.round(event.beta || 0); // Front-back tilt
        const gamma = Math.round(event.gamma || 0); // Left-right tilt
        
        tiltValue = beta;
        
        // Update display
        document.getElementById('tiltValue').textContent = beta + 'Â°';
        document.getElementById('tiltBox').textContent = beta + 'Â°';
        
        // Visual tilt indicator
        const tiltBox = document.getElementById('tiltBox');
        const tiltAmount = Math.min(Math.abs(beta) / 90, 1);
        
        if (beta > 0) {
          tiltBox.style.transform = `perspective(500px) rotateX(${beta * 0.5}deg)`;
          tiltBox.style.background = `linear-gradient(to bottom, 
            hsl(${120 + tiltAmount * 60}, 70%, 50%), 
            hsl(${240 - tiltAmount * 60}, 70%, 50%))`;
        }
        
        // Update status
        const status = document.getElementById('status');
        if (beta > 40) {
          status.textContent = 'ğŸ‰ REACTION! (Green color)';
          status.style.color = 'green';
        } else if (beta > 35) {
          status.textContent = 'ğŸ’§ DROPLETS FALLING';
          status.style.color = 'blue';
        } else if (beta > 10) {
          status.textContent = 'Tilting...';
          status.style.color = 'orange';
        } else {
          status.textContent = 'ğŸ“± Hold upright';
          status.style.color = 'black';
        }
        
        // Log values for debugging
        console.log(`Tilt: ${beta}Â°, Side tilt: ${gamma}Â°`);
        
      }, true);
    } else {
      document.getElementById('status').textContent = 
        'âš ï¸ Device orientation not supported. Try on mobile device.';
      
      // Simulate tilt with keyboard for desktop testing
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowUp') tiltValue += 5;
        if (e.key === 'ArrowDown') tiltValue -= 5;
        tiltValue = Math.max(-90, Math.min(90, tiltValue));
        
        document.getElementById('tiltValue').textContent = tiltValue + 'Â°';
        document.getElementById('tiltBox').textContent = tiltValue + 'Â°';
        
        if (tiltValue > 35) {
          document.getElementById('status').textContent = 'ğŸ’§ DROPLETS FALLING (Simulated)';
          document.getElementById('status').style.color = 'blue';
        } else {
          document.getElementById('status').textContent = 'Hold upright (Simulated)';
          document.getElementById('status').style.color = 'black';
        }
      });
    }
    
    // Start button for iOS (requires user interaction)
    document.addEventListener('click', () => {
      if (typeof DeviceOrientationEvent.requestPermission === 'function') {
        DeviceOrientationEvent.requestPermission()
          .then(permissionState => {
            if (permissionState === 'granted') {
              alert('Tilt sensor enabled! Tilt your phone forward.');
            }
          })
          .catch(console.error);
      }
    }, { once: true });
    
  </script>
  
  <div style="margin-top: 30px; color: #666; font-size: 14px;">
    <p>ğŸ’¡ <strong>Tip:</strong> On iOS, you might need to tap the screen first to enable tilt sensor</p>
    <p>ğŸ–¥ï¸ <strong>Desktop:</strong> Use UP/DOWN arrow keys to simulate tilt</p>
  </div>
</body>
</html>
